
import ListItem from './ListItem.js';

export default class ValidationList{
    constructor(data, htmlArr, comments, callback){
        this.jsonData = data;
        this.htmlArr = htmlArr;
        this.comments = comments;
        this.callback = callback;
        this.listItems = [];
        this.deltaY = null;
        this.createElements();
        this.createListItems();
        this.addListeners();
    }

    createElements(){
        this.parentSquare = document.getElementById("parentSquare");
        this.menu = document.createElement("div");
        const info = this.jsonData.messages.map(el => el.subType ? el.subType : el.type);
        const infoObj = this.numberOfErrors(info);

        const infoStr = `
            <span class="validator__warning-icon"></span>
            <span class="validator__warningText">Warnings:&nbsp;</span>
            ${infoObj.warnings}
            <span class="validator__error-icon"></span>
            <span class="validator__warningText">&nbsp;Errors:&nbsp;</span>
            ${infoObj.errors}
            <span class="validator__smallIcon">
                <svg class="rawValidationIcon" version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6170 2460" preserveAspectRatio="xMidYMid meet">
                <g id="layer101" fill="#ff0101" stroke="none">
                <path d="M2249 2424 c-7 -19 -5 -75 6 -187 8 -89 15 -189 15 -223 l0 -63 -102 6 c-95 5 -104 4 -121 -15 -11 -12 -17 -31 -15 -49 l3 -28 121 -3 122 -3 6 -31 c3 -17 6 -151 6 -299 0 -255 1 -269 19 -279 35 -18 60 -12 67 16 6 25 2 177 -13 462 l-6 122 54 0 c30 0 124 -7 210 -16 l156 -17 7 -71 c3 -39 17 -215 31 -390 15 -188 30 -325 37 -333 6 -8 23 -13 37 -11 l26 3 -2 105 c-1 58 -13 233 -26 390 -14 157 -23 286 -22 288 2 2 21 -2 44 -8 45 -12 73 -3 90 29 18 33 -9 54 -78 59 -73 5 -66 -16 -81 227 -16 238 -23 265 -74 265 -30 0 -59 -113 -36 -136 10 -10 21 -93 35 -258 l6 -79 -60 7 c-33 4 -126 13 -206 21 -81 8 -148 15 -150 17 -7 8 -24 408 -18 442 5 31 2 42 -12 52 -31 23 -64 17 -76 -12z"/>
                <path d="M3614 2228 c-5 -7 -7 -193 -6 -413 2 -220 -1 -405 -5 -411 -9 -13 -151 3 -335 38 l-118 22 -27 -21 c-19 -14 -28 -29 -28 -49 0 -33 -34 -26 300 -59 94 -9 178 -19 188 -21 12 -4 17 -16 17 -45 0 -34 3 -39 23 -39 27 0 57 28 57 54 0 12 6 16 18 12 53 -16 262 -38 327 -34 82 4 95 12 95 60 0 38 -24 48 -88 35 -38 -8 -87 -8 -180 1 -71 6 -135 14 -143 17 -12 4 -14 69 -14 421 0 400 -1 416 -19 430 -24 17 -52 18 -62 2z"/>
                <path d="M4366 2232 c-2 -4 -10 -55 -16 -112 -25 -237 -63 -512 -86 -620 -35 -166 -33 -180 28 -195 20 -5 27 -3 32 12 10 35 25 139 41 278 8 77 23 207 33 289 l17 149 24 -129 c67 -368 122 -533 187 -560 18 -8 38 -14 43 -14 27 0 55 125 97 430 16 118 34 214 39 208 1 -2 39 -118 83 -259 94 -296 156 -463 184 -491 29 -29 70 -20 80 17 14 52 36 233 53 423 20 237 49 395 81 449 29 50 30 69 5 83 -27 14 -76 13 -89 -2 -21 -27 -53 -234 -82 -543 -12 -121 -25 -235 -29 -255 -7 -34 -7 -33 -39 55 -18 50 -61 188 -97 307 -68 228 -93 292 -129 320 -31 26 -75 23 -85 -4 -12 -35 -47 -231 -76 -438 -15 -102 -28 -186 -29 -188 -2 -1 -13 21 -26 49 -27 64 -89 329 -130 555 -21 121 -35 173 -47 182 -19 13 -59 16 -67 4z"/>
                <path d="M5558 2214 c-14 -13 -8 -62 7 -68 13 -5 15 -44 15 -273 0 -147 -5 -311 -10 -363 -23 -214 -23 -229 -10 -245 7 -8 23 -15 36 -15 19 0 25 8 34 39 19 70 30 274 30 560 l0 284 102 -7 c56 -4 166 -18 245 -32 79 -13 148 -22 153 -19 6 4 10 24 10 46 0 31 -5 41 -22 49 -13 5 -117 16 -233 25 -115 9 -241 18 -280 22 -38 3 -73 2 -77 -3z"/>
                <path d="M1817 1943 c-8 -7 2 -84 13 -98 4 -5 11 -41 15 -80 4 -38 12 -76 18 -84 6 -7 14 -36 19 -65 15 -107 28 -159 48 -192 11 -20 20 -41 20 -49 0 -8 11 -31 25 -51 37 -55 33 -77 -17 -99 -24 -10 -46 -20 -51 -23 -4 -2 -14 11 -21 30 -8 18 -23 40 -34 49 -10 9 -22 35 -26 59 -4 23 -19 61 -34 84 -32 48 -52 91 -52 113 0 8 -16 48 -37 89 -30 62 -40 74 -61 74 -24 0 -25 -2 -19 -52 4 -30 17 -66 32 -88 14 -20 25 -46 25 -57 0 -30 18 -74 40 -98 12 -13 20 -40 23 -78 2 -32 9 -63 15 -69 12 -12 1 -58 -22 -92 -14 -22 -24 -54 -46 -143 -6 -24 -15 -43 -20 -43 -6 0 -5 10 1 24 16 34 5 67 -36 112 -31 35 -35 45 -35 96 0 66 -30 143 -58 152 -13 5 -21 18 -25 45 -2 21 -19 69 -37 107 -103 220 -129 264 -157 264 -16 0 -9 -63 12 -120 7 -19 16 -60 20 -90 4 -30 14 -64 21 -75 8 -11 14 -30 14 -44 0 -13 9 -38 19 -55 25 -40 61 -163 61 -207 0 -19 11 -53 24 -75 13 -23 30 -66 37 -95 7 -30 21 -66 31 -81 10 -14 18 -37 18 -51 0 -14 7 -38 15 -53 l15 -29 -63 -6 c-34 -3 -87 -9 -119 -14 -55 -7 -56 -7 -71 21 -11 22 -16 83 -19 248 l-5 220 -32 28 c-40 36 -90 37 -155 4 l-46 -24 6 34 c9 48 -2 84 -26 84 -10 0 -22 -4 -25 -10 -10 -16 -43 -11 -48 8 -3 12 -5 11 -6 -6 -1 -18 -6 -23 -23 -20 -28 4 -67 81 -103 205 -27 94 -68 152 -99 140 -13 -5 -15 -15 -10 -49 4 -24 10 -47 14 -53 4 -5 11 -41 15 -80 4 -38 13 -79 21 -90 8 -10 14 -37 14 -58 0 -21 4 -46 10 -56 7 -14 1 -35 -25 -87 -19 -38 -37 -73 -39 -79 -10 -22 -86 103 -86 141 0 9 -16 49 -37 90 -30 62 -40 74 -61 74 -24 0 -25 -2 -19 -52 4 -30 17 -66 32 -88 14 -20 25 -46 25 -57 0 -30 18 -74 40 -98 10 -11 20 -38 22 -60 4 -35 0 -47 -37 -95 -23 -30 -50 -70 -59 -88 -14 -27 -20 -31 -32 -21 -10 8 -14 33 -14 86 0 55 -4 79 -16 91 -13 12 -15 29 -11 74 5 60 -3 74 -20 36 l-10 -23 -7 23 c-4 12 -11 22 -16 22 -5 0 -23 30 -41 68 -102 218 -128 262 -156 262 -16 0 -9 -63 12 -120 7 -19 16 -60 20 -90 4 -30 14 -64 21 -75 8 -11 14 -29 14 -41 0 -12 12 -45 26 -72 29 -57 42 -126 26 -145 -35 -41 -40 -482 -7 -533 8 -13 15 -30 15 -39 0 -9 6 -15 13 -13 6 2 14 -1 17 -7 7 -13 -51 -24 -137 -26 -75 -2 -85 -7 -57 -29 12 -11 40 -11 142 -2 69 6 128 9 131 7 2 -3 -18 -15 -45 -27 -40 -19 -71 -23 -168 -26 -88 -3 -123 -8 -134 -19 -19 -19 -8 -29 65 -59 49 -20 75 -24 174 -24 123 0 188 13 269 55 75 38 85 38 138 -7 26 -23 58 -51 71 -64 13 -13 29 -24 35 -24 6 0 21 -3 34 -6 35 -10 26 9 -29 62 -28 27 -63 65 -79 85 l-29 35 64 68 c52 55 66 65 71 52 4 -9 30 -33 58 -52 93 -63 121 -83 139 -98 23 -21 37 -20 37 2 0 21 -110 171 -165 226 -19 20 -35 40 -35 46 0 6 -11 28 -25 48 -14 20 -25 43 -25 50 0 7 -8 27 -17 45 -9 18 -16 40 -14 50 1 10 -3 24 -9 32 -6 7 -15 28 -20 46 -9 30 -6 36 32 78 51 56 58 59 58 29 0 -13 16 -61 35 -107 19 -45 35 -92 35 -104 0 -26 35 -87 50 -87 5 0 10 -15 10 -34 0 -29 7 -39 50 -70 27 -19 58 -52 69 -73 10 -21 50 -64 88 -95 37 -32 74 -64 82 -71 39 -40 49 -57 41 -62 -38 -24 31 -72 77 -54 32 12 113 87 113 105 0 7 11 32 25 55 14 24 25 49 25 56 0 7 11 29 25 49 14 21 31 57 37 81 l11 44 23 -22 c23 -21 24 -29 24 -153 0 -131 9 -154 29 -71 7 32 9 35 10 13 1 -15 5 -29 10 -32 13 -9 41 39 41 71 0 15 5 35 10 43 7 12 14 9 41 -18 17 -17 36 -32 43 -32 6 0 21 -3 34 -6 36 -10 26 9 -44 78 l-65 64 11 85 c15 117 21 142 31 132 4 -4 4 -26 -1 -48 -5 -22 -9 -49 -9 -60 l0 -20 9 20 c5 11 9 32 9 48 1 36 22 35 63 -4 47 -43 117 -95 161 -119 20 -11 37 -25 37 -30 0 -6 7 -10 15 -10 8 0 15 8 15 18 0 20 -109 171 -163 224 -44 45 -81 121 -73 153 4 14 10 25 14 25 5 0 23 -36 42 -80 18 -45 46 -99 62 -121 33 -46 95 -78 149 -79 29 0 47 -9 87 -45 55 -50 117 -81 127 -65 4 6 -3 21 -14 33 -81 88 -104 128 -81 142 6 4 26 29 45 58 22 33 36 46 39 36 3 -8 21 -79 40 -159 38 -162 83 -293 117 -342 47 -69 134 -148 164 -148 16 0 1 27 -24 41 -16 10 -45 41 -65 70 -39 58 -49 88 -15 45 27 -35 34 -28 15 15 -8 19 -29 94 -46 168 -26 110 -31 144 -25 190 4 31 7 91 6 134 -1 48 2 76 8 73 6 -4 8 16 6 51 -7 99 4 35 25 -145 11 -95 25 -193 31 -217 12 -48 28 -68 30 -38 1 21 29 -74 29 -99 0 -10 -4 -18 -8 -18 -12 0 -32 46 -32 72 0 18 -3 19 -12 10 -10 -10 -8 -26 9 -75 16 -44 21 -74 16 -104 -4 -33 -1 -49 17 -75 l22 -33 -5 40 c-3 22 -8 48 -13 59 -6 15 -4 17 15 11 21 -6 22 -5 18 37 -2 23 -2 34 0 23 4 -14 12 -1 30 45 13 36 21 75 18 87 -3 13 0 31 7 42 9 15 9 37 -1 101 -7 49 -9 86 -3 93 10 13 -22 298 -38 332 -6 14 -7 3 -4 -35 3 -42 -1 -32 -15 41 -37 185 -63 241 -114 247 -39 5 -135 -22 -190 -54 -41 -23 -48 -30 -43 -50 5 -17 3 -22 -7 -19 -8 4 -26 -24 -51 -81 -41 -91 -110 -204 -124 -204 -16 0 -54 92 -43 103 19 19 12 42 -19 60 -20 12 -30 26 -30 42 0 12 -11 47 -25 77 -14 29 -25 71 -25 94 0 30 -8 51 -29 78 -17 21 -44 81 -62 134 -17 53 -40 113 -50 132 -9 20 -29 76 -43 125 -31 106 -80 168 -109 138z m-723 -677 c15 6 53 -76 80 -170 25 -84 14 -79 -14 7 -24 78 -58 137 -77 137 -7 0 -19 -12 -28 -27 l-16 -28 6 30 c3 17 11 43 18 58 10 24 12 25 15 8 2 -11 9 -18 16 -15z m10 -113 c13 -27 26 -59 30 -73 16 -58 61 -170 69 -170 4 0 6 17 3 38 -3 20 4 3 15 -38 11 -41 26 -82 33 -90 23 -26 25 -57 5 -74 -23 -19 -24 -30 -5 -46 8 -6 12 -18 10 -25 -5 -13 34 -91 62 -125 7 -8 17 -35 24 -60 7 -25 17 -51 22 -58 6 -7 8 -15 5 -18 -3 -3 -23 18 -46 48 -22 29 -51 67 -64 83 -14 17 -28 49 -32 72 -3 23 -24 71 -46 107 -39 65 -48 99 -29 111 19 12 10 41 -20 58 -20 12 -30 26 -30 42 0 12 -11 47 -25 77 -15 32 -25 71 -25 98 0 43 8 90 16 90 2 0 14 -21 28 -47z m956 -99 c25 -58 27 -89 4 -54 -10 14 -22 30 -29 35 -6 6 -15 22 -19 38 -11 47 22 33 44 -19z m-80 -24 c6 -12 8 -36 4 -57 -7 -36 -7 -36 -20 -12 -15 28 -18 89 -4 89 5 0 14 -9 20 -20z m-175 -189 c-4 -31 -8 -72 -9 -91 -4 -60 -8 -66 -17 -30 -11 46 10 219 24 194 5 -9 6 -41 2 -73z m335 39 c0 -11 -4 -20 -10 -20 -5 0 -10 9 -10 20 0 11 5 20 10 20 6 0 10 -9 10 -20z m-1399 -147 l4 -38 -45 4 -45 3 39 34 c22 19 40 34 42 34 1 0 4 -17 5 -37z m-188 -143 c6 -22 0 -25 -23 -10 -13 9 -13 11 0 20 8 5 16 10 16 10 1 0 4 -9 7 -20z m203 5 c63 -9 91 -39 43 -49 -18 -3 -28 -10 -24 -17 5 -7 -5 -8 -32 -3 -21 4 -38 7 -39 8 0 0 -10 18 -23 40 l-22 38 23 -5 c13 -3 46 -9 74 -12z m768 -77 c-13 -39 -24 -79 -24 -89 0 -35 -19 -29 -25 8 -3 21 -12 64 -19 96 l-13 57 53 0 53 0 -25 -72z m-949 -11 c5 -7 17 -16 26 -19 24 -9 13 -55 -14 -62 -32 -8 -97 -7 -97 2 0 4 7 16 15 26 21 27 19 32 -15 46 -47 20 -43 25 18 23 34 -2 61 -8 67 -16z m195 -52 c17 -9 30 -17 30 -19 0 -9 -64 11 -68 22 -5 16 3 15 38 -3z"/>
                </g>
                <g id="layer102" fill="#ff6262" stroke="none">
                <path d="M2249 2424 c-7 -19 -5 -75 6 -187 8 -89 15 -189 15 -223 l0 -63 -102 6 c-95 5 -104 4 -121 -15 -11 -12 -17 -31 -15 -49 l3 -28 121 -3 122 -3 6 -31 c3 -17 6 -151 6 -299 0 -255 1 -269 19 -279 35 -18 60 -12 67 16 6 25 2 177 -13 462 l-6 122 54 0 c30 0 124 -7 210 -16 l156 -17 7 -71 c3 -39 17 -215 31 -390 15 -188 30 -325 37 -333 6 -8 23 -13 37 -11 l26 3 -2 105 c-1 58 -13 233 -26 390 -14 157 -23 286 -22 288 2 2 21 -2 44 -8 45 -12 73 -3 90 29 18 33 -9 54 -78 59 -73 5 -66 -16 -81 227 -16 238 -23 265 -74 265 -30 0 -59 -113 -36 -136 10 -10 21 -93 35 -258 l6 -79 -60 7 c-33 4 -126 13 -206 21 -81 8 -148 15 -150 17 -7 8 -24 408 -18 442 5 31 2 42 -12 52 -31 23 -64 17 -76 -12z"/>
                <path d="M3614 2228 c-5 -7 -7 -193 -6 -413 2 -220 -1 -405 -5 -411 -9 -13 -151 3 -335 38 l-118 22 -27 -21 c-19 -14 -28 -29 -28 -49 0 -33 -34 -26 300 -59 94 -9 178 -19 188 -21 12 -4 17 -16 17 -45 0 -34 3 -39 23 -39 27 0 57 28 57 54 0 12 6 16 18 12 53 -16 262 -38 327 -34 82 4 95 12 95 60 0 38 -24 48 -88 35 -38 -8 -87 -8 -180 1 -71 6 -135 14 -143 17 -12 4 -14 69 -14 421 0 400 -1 416 -19 430 -24 17 -52 18 -62 2z"/>
                <path d="M4366 2232 c-2 -4 -10 -55 -16 -112 -25 -237 -63 -512 -86 -620 -35 -166 -33 -180 28 -195 20 -5 27 -3 32 12 10 35 25 139 41 278 8 77 23 207 33 289 l17 149 24 -129 c67 -368 122 -533 187 -560 18 -8 38 -14 43 -14 27 0 55 125 97 430 16 118 34 214 39 208 1 -2 39 -118 83 -259 94 -296 156 -463 184 -491 29 -29 70 -20 80 17 14 52 36 233 53 423 20 237 49 395 81 449 29 50 30 69 5 83 -27 14 -76 13 -89 -2 -21 -27 -53 -234 -82 -543 -12 -121 -25 -235 -29 -255 -7 -34 -7 -33 -39 55 -18 50 -61 188 -97 307 -68 228 -93 292 -129 320 -31 26 -75 23 -85 -4 -12 -35 -47 -231 -76 -438 -15 -102 -28 -186 -29 -188 -2 -1 -13 21 -26 49 -27 64 -89 329 -130 555 -21 121 -35 173 -47 182 -19 13 -59 16 -67 4z"/>
                <path d="M5558 2214 c-14 -13 -8 -62 7 -68 13 -5 15 -44 15 -273 0 -147 -5 -311 -10 -363 -23 -214 -23 -229 -10 -245 7 -8 23 -15 36 -15 19 0 25 8 34 39 19 70 30 274 30 560 l0 284 102 -7 c56 -4 166 -18 245 -32 79 -13 148 -22 153 -19 6 4 10 24 10 46 0 31 -5 41 -22 49 -13 5 -117 16 -233 25 -115 9 -241 18 -280 22 -38 3 -73 2 -77 -3z"/>
                <path d="M1001 1393 c-1 -19 -7 -22 -33 -21 -18 0 -42 -2 -53 -6 -31 -9 -89 -91 -126 -176 -18 -41 -37 -79 -42 -85 -7 -7 -8 -6 -3 3 14 24 -5 12 -36 -24 -48 -55 -93 -116 -112 -151 -9 -18 -26 -38 -37 -44 -22 -11 -22 -11 -17 90 5 92 -2 128 -16 84 -3 -10 -4 21 -2 70 2 88 -3 105 -21 65 l-10 -23 -7 23 c-4 12 -11 22 -17 22 -12 0 -37 -61 -56 -140 -9 -36 -19 -70 -24 -75 -32 -42 -36 -483 -4 -531 8 -13 15 -30 15 -39 0 -9 6 -15 13 -13 7 2 14 -1 15 -7 4 -14 -49 -24 -135 -26 -75 -2 -85 -7 -57 -29 12 -11 40 -11 142 -2 69 6 128 9 131 7 2 -3 -18 -15 -45 -27 -40 -19 -71 -23 -168 -26 -88 -3 -123 -8 -134 -19 -19 -19 -8 -29 65 -59 50 -20 75 -24 174 -24 124 0 210 18 277 60 18 11 39 20 48 20 16 0 52 31 143 121 40 39 65 76 85 123 28 66 29 68 10 85 -29 27 -160 70 -237 77 l-68 7 144 141 c136 133 228 250 262 329 l13 31 25 -50 c13 -27 27 -60 31 -74 16 -58 61 -170 69 -170 4 0 6 17 3 38 -3 20 4 3 15 -38 11 -41 26 -82 33 -90 23 -26 25 -57 5 -74 -23 -19 -24 -30 -5 -46 8 -6 12 -18 10 -25 -5 -13 34 -92 62 -125 7 -8 18 -36 24 -63 7 -26 16 -50 21 -53 5 -3 9 -25 9 -50 0 -48 23 -104 42 -104 9 0 9 -3 0 -12 -20 -20 -14 -37 17 -53 23 -11 36 -13 58 -4 30 11 113 87 113 103 0 9 39 94 62 136 36 67 47 92 58 140 7 30 21 70 32 89 12 21 17 44 13 60 -7 33 28 255 47 301 l15 35 -5 -56 c-3 -35 0 -59 7 -63 6 -4 11 -15 11 -24 0 -13 -2 -14 -9 -3 -13 20 -21 1 -33 -77 -17 -110 -19 -138 -24 -352 -3 -138 -2 -202 5 -195 6 6 15 28 20 50 7 32 9 35 10 13 1 -15 5 -29 10 -32 18 -11 38 41 50 129 6 50 25 187 41 305 16 118 30 230 30 248 0 36 14 42 30 12 8 -15 2 -62 -25 -197 -34 -175 -40 -211 -30 -201 3 2 14 54 25 114 20 113 47 204 59 204 4 0 22 -36 41 -80 43 -105 81 -157 133 -181 98 -44 162 -15 249 115 32 47 26 57 72 -134 38 -162 83 -293 117 -342 47 -69 134 -148 164 -148 16 0 1 27 -24 41 -16 10 -45 41 -65 70 -39 58 -49 88 -15 45 27 -35 34 -28 15 15 -8 19 -29 94 -46 168 -26 110 -31 144 -25 190 4 31 7 91 6 134 -1 48 2 76 8 73 6 -4 8 16 6 51 -7 99 4 35 25 -145 11 -95 25 -193 31 -217 12 -48 28 -68 30 -38 1 21 29 -74 29 -99 0 -10 -4 -18 -8 -18 -12 0 -32 46 -32 72 0 18 -3 19 -12 10 -10 -10 -8 -26 9 -75 16 -44 21 -74 16 -104 -4 -33 -1 -49 17 -75 l22 -33 -5 40 c-3 22 -8 48 -13 59 -6 15 -4 17 15 11 21 -6 22 -5 18 37 -2 23 -2 34 0 23 4 -14 12 -1 30 45 13 36 21 75 18 87 -3 13 0 31 7 42 9 15 9 37 -1 101 -7 49 -9 86 -3 93 10 13 -22 298 -38 332 -6 14 -7 3 -4 -35 3 -42 -1 -32 -15 41 -37 185 -63 241 -114 247 -39 5 -135 -22 -190 -54 -41 -23 -48 -30 -43 -50 5 -17 3 -22 -7 -19 -8 4 -26 -24 -51 -81 -41 -90 -110 -204 -124 -204 -4 0 -28 41 -52 91 -88 180 -206 235 -297 138 -33 -35 -39 -36 -46 -8 -4 16 -11 20 -26 16 -12 -3 -21 0 -21 5 0 7 -5 6 -14 -1 -7 -6 -20 -9 -28 -6 -18 7 -51 -57 -72 -140 -8 -33 -30 -103 -49 -155 l-34 -95 -64 -6 c-35 -3 -89 -9 -121 -14 -55 -7 -56 -7 -71 21 -11 22 -16 83 -19 248 l-5 220 -32 28 c-40 36 -90 37 -155 4 l-46 -24 6 34 c9 48 -2 84 -26 84 -10 0 -22 -4 -25 -10 -10 -16 -43 -11 -48 8 -4 13 -5 12 -6 -5z m93 -127 c15 6 53 -76 80 -170 25 -84 14 -79 -14 7 -24 78 -58 137 -77 137 -7 0 -19 -12 -28 -27 l-16 -28 6 30 c3 17 11 43 18 58 10 24 12 25 15 8 2 -11 9 -18 16 -15z m-103 10 c-6 -7 -22 -45 -35 -84 -40 -118 -61 -142 -26 -31 19 63 53 129 66 129 4 0 1 -6 -5 -14z m1080 -197 c4 -13 7 -42 8 -64 l1 -39 -16 24 c-10 14 -22 30 -29 35 -6 6 -15 22 -18 37 -5 20 -3 28 10 31 28 7 37 2 44 -24z m74 -173 c13 -43 13 -46 -4 -46 -20 0 -29 33 -23 78 5 31 10 24 27 -32z m-1424 -306 c62 -9 89 -18 97 -30 9 -15 6 -19 -19 -24 -20 -4 -28 -10 -23 -17 5 -8 0 -10 -17 -6 -13 3 -53 11 -89 17 -74 13 -150 39 -150 51 0 5 12 11 28 15 15 3 32 7 37 9 6 2 19 2 30 0 11 -2 59 -9 106 -15z m803 -82 c-13 -39 -24 -79 -24 -89 0 -35 -19 -29 -25 8 -3 21 -12 64 -19 96 l-13 57 53 0 53 0 -25 -72z m-948 -13 c7 -9 41 -19 90 -26 66 -9 134 -31 134 -43 0 -5 -82 11 -113 23 -45 17 -77 14 -77 -8 0 -21 -26 -31 -82 -31 -41 0 -45 5 -23 34 21 27 19 32 -15 46 -47 20 -43 25 18 23 37 -2 61 -8 68 -18z"/>
                </g>
                <g id="layer103" fill="#ffa4a4" stroke="none">
                <path d="M2249 2424 c-7 -19 -5 -75 6 -187 8 -89 15 -189 15 -223 l0 -63 -102 6 c-95 5 -104 4 -121 -15 -11 -12 -17 -31 -15 -49 l3 -28 121 -3 122 -3 6 -31 c3 -17 6 -151 6 -299 0 -255 1 -269 19 -279 35 -18 60 -12 67 16 6 25 2 177 -13 462 l-6 122 54 0 c30 0 124 -7 210 -16 l156 -17 7 -71 c3 -39 17 -215 31 -390 15 -188 30 -325 37 -333 6 -8 23 -13 37 -11 l26 3 -2 105 c-1 58 -13 233 -26 390 -14 157 -23 286 -22 288 2 2 21 -2 44 -8 45 -12 73 -3 90 29 18 33 -9 54 -78 59 -73 5 -66 -16 -81 227 -16 238 -23 265 -74 265 -30 0 -59 -113 -36 -136 10 -10 21 -93 35 -258 l6 -79 -60 7 c-33 4 -126 13 -206 21 -81 8 -148 15 -150 17 -7 8 -24 408 -18 442 5 31 2 42 -12 52 -31 23 -64 17 -76 -12z"/>
                <path d="M3614 2228 c-5 -7 -7 -193 -6 -413 2 -220 -1 -405 -5 -411 -9 -13 -151 3 -335 38 l-118 22 -27 -21 c-19 -14 -28 -29 -28 -49 0 -33 -34 -26 300 -59 94 -9 178 -19 188 -21 12 -4 17 -16 17 -45 0 -34 3 -39 23 -39 27 0 57 28 57 54 0 12 6 16 18 12 53 -16 262 -38 327 -34 82 4 95 12 95 60 0 38 -24 48 -88 35 -38 -8 -87 -8 -180 1 -71 6 -135 14 -143 17 -12 4 -14 69 -14 421 0 400 -1 416 -19 430 -24 17 -52 18 -62 2z"/>
                <path d="M4366 2232 c-2 -4 -10 -55 -16 -112 -25 -237 -63 -512 -86 -620 -35 -166 -33 -180 28 -195 20 -5 27 -3 32 12 10 35 25 139 41 278 8 77 23 207 33 289 l17 149 24 -129 c67 -368 122 -533 187 -560 18 -8 38 -14 43 -14 27 0 55 125 97 430 16 118 34 214 39 208 1 -2 39 -118 83 -259 94 -296 156 -463 184 -491 29 -29 70 -20 80 17 14 52 36 233 53 423 20 237 49 395 81 449 29 50 30 69 5 83 -27 14 -76 13 -89 -2 -21 -27 -53 -234 -82 -543 -12 -121 -25 -235 -29 -255 -7 -34 -7 -33 -39 55 -18 50 -61 188 -97 307 -68 228 -93 292 -129 320 -31 26 -75 23 -85 -4 -12 -35 -47 -231 -76 -438 -15 -102 -28 -186 -29 -188 -2 -1 -13 21 -26 49 -27 64 -89 329 -130 555 -21 121 -35 173 -47 182 -19 13 -59 16 -67 4z"/>
                <path d="M5558 2214 c-14 -13 -8 -62 7 -68 13 -5 15 -44 15 -273 0 -147 -5 -311 -10 -363 -23 -214 -23 -229 -10 -245 7 -8 23 -15 36 -15 19 0 25 8 34 39 19 70 30 274 30 560 l0 284 102 -7 c56 -4 166 -18 245 -32 79 -13 148 -22 153 -19 6 4 10 24 10 46 0 31 -5 41 -22 49 -13 5 -117 16 -233 25 -115 9 -241 18 -280 22 -38 3 -73 2 -77 -3z"/>
                <path d="M1001 1393 c-1 -19 -7 -22 -43 -21 -38 0 -47 -4 -88 -49 -29 -32 -59 -80 -82 -134 -19 -46 -40 -83 -46 -82 -13 3 -82 -74 -122 -136 -78 -123 -84 -122 -78 9 3 55 1 100 -3 100 -4 0 -10 -10 -13 -22 -2 -13 -4 19 -2 70 2 93 -3 110 -21 70 l-10 -23 -7 23 c-15 47 -37 11 -72 -123 -9 -33 -20 -65 -24 -70 -33 -40 -37 -483 -5 -531 8 -13 15 -30 15 -39 0 -9 6 -15 13 -13 7 2 14 -1 15 -7 4 -14 -49 -24 -135 -26 -75 -2 -85 -7 -57 -29 12 -11 40 -11 142 -2 69 6 128 9 131 7 2 -3 -18 -15 -45 -27 -40 -19 -71 -23 -168 -26 -88 -3 -123 -8 -134 -19 -19 -19 -8 -29 65 -59 50 -20 75 -24 174 -24 124 0 210 18 277 60 18 11 40 20 48 20 9 0 30 13 47 30 89 82 157 152 157 161 0 6 12 35 26 66 22 46 24 57 13 68 -24 23 -179 74 -246 81 l-65 7 140 136 c100 98 157 163 202 231 34 52 66 104 70 115 6 17 11 13 32 -30 14 -28 28 -61 32 -75 16 -58 61 -170 69 -170 4 0 6 17 3 38 -3 20 4 3 15 -38 11 -41 26 -82 33 -90 23 -26 25 -57 5 -74 -23 -19 -24 -30 -5 -46 8 -6 12 -18 10 -25 -5 -13 34 -92 62 -125 7 -8 18 -36 24 -63 7 -26 16 -50 21 -53 5 -3 9 -25 9 -50 0 -48 23 -104 42 -104 9 0 9 -3 0 -12 -20 -20 -14 -37 17 -53 23 -11 36 -13 58 -4 30 11 113 87 113 103 0 9 39 94 62 136 38 70 47 92 58 145 6 33 21 73 32 88 12 18 18 37 14 50 -10 36 23 247 51 325 30 86 39 90 18 8 -17 -66 -19 -106 -5 -106 6 0 10 -9 10 -21 0 -11 -4 -18 -9 -14 -19 11 -30 -29 -48 -180 -10 -91 -14 -450 -4 -440 6 6 15 28 20 50 7 32 9 35 10 13 1 -15 5 -29 10 -32 18 -11 39 41 49 124 14 114 39 302 57 430 8 58 15 117 15 133 0 32 15 35 30 7 8 -15 8 -37 -1 -81 -13 -68 -7 -88 11 -35 6 20 15 36 19 36 4 0 22 -36 41 -80 43 -105 81 -157 133 -181 97 -43 163 -13 249 115 32 47 26 57 72 -134 38 -162 83 -293 117 -342 47 -69 134 -148 164 -148 16 0 1 27 -24 41 -16 10 -45 41 -65 70 -39 58 -49 88 -15 45 27 -35 34 -28 15 15 -8 19 -29 94 -46 168 -26 110 -31 144 -25 190 4 31 7 91 6 134 -1 48 2 76 8 73 6 -4 8 16 6 51 -7 99 4 35 25 -145 11 -95 25 -193 31 -217 12 -48 28 -68 30 -38 1 21 29 -74 29 -99 0 -10 -4 -18 -8 -18 -12 0 -32 46 -32 72 0 18 -3 19 -12 10 -10 -10 -8 -26 9 -75 16 -44 21 -74 16 -104 -4 -33 -1 -49 17 -75 l22 -33 -5 40 c-3 22 -8 48 -13 59 -6 15 -4 17 15 11 21 -6 22 -5 18 37 -2 23 -2 34 0 23 4 -14 12 -1 30 45 13 36 21 75 18 87 -3 13 0 31 7 42 9 15 9 37 -1 101 -7 49 -9 86 -3 93 10 13 -22 298 -38 332 -6 14 -7 3 -4 -35 3 -42 -1 -32 -15 41 -37 185 -63 241 -114 247 -39 5 -135 -22 -190 -54 -41 -23 -48 -30 -43 -50 5 -17 3 -22 -7 -19 -8 4 -26 -24 -51 -81 -41 -89 -110 -204 -123 -204 -5 0 -28 39 -53 86 -101 192 -215 241 -307 130 l-30 -37 -6 28 c-5 27 -9 29 -56 29 -48 0 -50 -1 -70 -40 -11 -23 -26 -68 -34 -101 -8 -33 -30 -103 -49 -155 l-33 -95 -65 -6 c-36 -3 -90 -9 -122 -14 -55 -7 -56 -7 -71 21 -11 22 -16 83 -19 248 l-5 220 -32 28 c-40 36 -90 37 -155 4 l-46 -24 6 34 c9 48 -2 84 -26 84 -10 0 -22 -4 -25 -10 -10 -16 -43 -11 -48 8 -4 13 -5 12 -6 -5z m93 -127 c15 6 53 -76 80 -170 25 -84 14 -79 -14 7 -24 78 -58 137 -77 137 -7 0 -19 -12 -28 -27 l-16 -28 6 30 c3 17 11 43 18 58 10 24 12 25 15 8 2 -11 9 -18 16 -15z m-101 12 c-6 -7 -21 -44 -33 -83 -13 -38 -29 -79 -37 -90 l-15 -20 5 20 c24 93 40 136 58 158 11 15 23 27 26 27 3 0 1 -6 -4 -12z m1113 -206 c-6 -6 -26 43 -25 61 0 7 7 -3 15 -22 8 -18 13 -36 10 -39z m-26 -52 l0 -44 -16 24 c-10 14 -22 30 -29 35 -6 6 -15 21 -18 35 -5 20 -2 28 16 36 19 8 24 6 34 -16 7 -14 12 -45 13 -70z m74 -132 c5 -23 3 -28 -13 -28 -21 0 -29 31 -22 85 l4 30 12 -30 c7 -16 15 -42 19 -57z m-1504 -228 c-8 -5 -22 -10 -30 -10 -13 0 -13 1 0 10 8 5 22 10 30 10 13 0 13 -1 0 -10z m55 -57 c110 -19 148 -41 94 -56 -18 -5 -27 -12 -23 -19 5 -7 -1 -9 -17 -5 -13 3 -46 9 -74 12 -63 8 -81 12 -127 32 -45 19 -47 28 -10 41 38 15 45 14 157 -5z m819 -85 c-13 -39 -24 -79 -24 -89 0 -35 -19 -29 -25 8 -3 21 -12 64 -19 96 l-13 57 53 0 53 0 -25 -72z m-949 -11 c5 -8 45 -19 88 -25 66 -10 137 -34 137 -46 0 -5 -81 11 -120 23 -51 16 -70 14 -70 -8 0 -21 -26 -31 -82 -31 -41 0 -45 5 -23 34 21 27 19 32 -15 46 -47 20 -43 25 18 23 34 -2 61 -8 67 -16z"/>
                <path d="M1931 710 c-13 -61 -14 -96 -2 -65 10 25 24 115 17 115 -2 0 -9 -23 -15 -50z"/>
                </g>
                <g id="layer104" fill="#f5f5f5" stroke="none">
                <path d="M2249 2424 c-7 -19 -5 -75 6 -187 8 -89 15 -189 15 -223 l0 -63 -102 6 c-95 5 -104 4 -121 -15 -11 -12 -17 -31 -15 -49 l3 -28 121 -3 122 -3 6 -31 c3 -17 6 -151 6 -299 0 -255 1 -269 19 -279 35 -18 60 -12 67 16 6 25 2 177 -13 462 l-6 122 54 0 c30 0 124 -7 210 -16 l156 -17 7 -71 c3 -39 17 -215 31 -390 15 -188 30 -325 37 -333 6 -8 23 -13 37 -11 l26 3 -2 105 c-1 58 -13 233 -26 390 -14 157 -23 286 -22 288 2 2 21 -2 44 -8 45 -12 73 -3 90 29 18 33 -9 54 -78 59 -73 5 -66 -16 -81 227 -16 238 -23 265 -74 265 -30 0 -59 -113 -36 -136 10 -10 21 -93 35 -258 l6 -79 -60 7 c-33 4 -126 13 -206 21 -81 8 -148 15 -150 17 -7 8 -24 408 -18 442 5 31 2 42 -12 52 -31 23 -64 17 -76 -12z"/>
                <path d="M3614 2228 c-5 -7 -7 -193 -6 -413 2 -220 -1 -405 -5 -411 -9 -13 -151 3 -335 38 l-118 22 -27 -21 c-19 -14 -28 -29 -28 -49 0 -33 -34 -26 300 -59 94 -9 178 -19 188 -21 12 -4 17 -16 17 -45 0 -34 3 -39 23 -39 27 0 57 28 57 54 0 12 6 16 18 12 53 -16 262 -38 327 -34 82 4 95 12 95 60 0 38 -24 48 -88 35 -38 -8 -87 -8 -180 1 -71 6 -135 14 -143 17 -12 4 -14 69 -14 421 0 400 -1 416 -19 430 -24 17 -52 18 -62 2z"/>
                <path d="M4366 2232 c-2 -4 -10 -55 -16 -112 -25 -237 -63 -512 -86 -620 -35 -166 -33 -180 28 -195 20 -5 27 -3 32 12 10 35 25 139 41 278 8 77 23 207 33 289 l17 149 24 -129 c67 -368 122 -533 187 -560 18 -8 38 -14 43 -14 27 0 55 125 97 430 16 118 34 214 39 208 1 -2 39 -118 83 -259 94 -296 156 -463 184 -491 29 -29 70 -20 80 17 14 52 36 233 53 423 20 237 49 395 81 449 29 50 30 69 5 83 -27 14 -76 13 -89 -2 -21 -27 -53 -234 -82 -543 -12 -121 -25 -235 -29 -255 -7 -34 -7 -33 -39 55 -18 50 -61 188 -97 307 -68 228 -93 292 -129 320 -31 26 -75 23 -85 -4 -12 -35 -47 -231 -76 -438 -15 -102 -28 -186 -29 -188 -2 -1 -13 21 -26 49 -27 64 -89 329 -130 555 -21 121 -35 173 -47 182 -19 13 -59 16 -67 4z"/>
                <path d="M5558 2214 c-14 -13 -8 -62 7 -68 13 -5 15 -44 15 -273 0 -147 -5 -311 -10 -363 -23 -214 -23 -229 -10 -245 7 -8 23 -15 36 -15 19 0 25 8 34 39 19 70 30 274 30 560 l0 284 102 -7 c56 -4 166 -18 245 -32 79 -13 148 -22 153 -19 6 4 10 24 10 46 0 31 -5 41 -22 49 -13 5 -117 16 -233 25 -115 9 -241 18 -280 22 -38 3 -73 2 -77 -3z"/>
                <path d="M1001 1392 c-1 -18 -6 -23 -23 -22 -48 4 -61 -1 -105 -47 -42 -44 -94 -139 -109 -200 -4 -13 -11 -22 -17 -20 -15 5 -96 -80 -127 -133 -67 -113 -97 -117 -86 -13 4 35 9 77 13 93 3 19 1 30 -6 30 -6 0 -11 -12 -11 -27 0 -22 -2 -25 -10 -13 -9 14 -6 85 6 153 7 33 -9 36 -23 5 l-10 -23 -7 23 c-4 12 -11 22 -16 22 -4 0 -22 -46 -40 -102 -18 -57 -36 -108 -40 -113 -33 -41 -37 -483 -5 -531 8 -13 15 -30 15 -39 0 -9 6 -15 13 -13 7 2 14 -1 15 -7 4 -14 -49 -24 -135 -26 -75 -2 -85 -7 -57 -29 12 -11 40 -11 142 -2 69 6 128 9 131 7 2 -3 -18 -15 -45 -27 -40 -19 -71 -23 -168 -26 -88 -3 -123 -8 -134 -19 -19 -19 -8 -29 65 -59 50 -20 75 -24 174 -24 124 0 210 18 277 60 18 11 41 20 52 20 10 0 22 9 25 20 4 11 24 29 45 40 52 27 123 110 139 164 7 25 19 50 27 57 19 16 17 36 -5 48 -50 27 -193 72 -245 78 l-58 6 43 43 c24 23 58 57 74 75 17 19 55 55 86 80 49 41 196 243 211 289 5 16 49 -62 62 -110 16 -58 61 -170 69 -170 4 0 6 17 3 38 -3 20 4 3 15 -38 11 -41 26 -82 33 -90 23 -26 25 -57 5 -74 -23 -19 -24 -30 -5 -46 8 -6 12 -18 10 -25 -5 -13 34 -92 62 -125 7 -8 18 -36 24 -63 7 -26 16 -50 21 -53 5 -3 9 -25 9 -50 0 -48 23 -104 42 -104 9 0 9 -3 0 -12 -20 -20 -14 -37 17 -53 23 -11 36 -13 58 -4 30 11 113 87 113 103 0 9 39 94 62 136 40 73 48 94 53 132 8 52 34 118 48 118 5 0 7 13 4 30 -10 49 28 288 57 360 32 79 28 102 -20 97 -19 -3 -37 0 -40 4 -8 13 -24 11 -24 -3 0 -6 -7 -19 -15 -28 -8 -9 -22 -45 -31 -80 -9 -36 -31 -113 -50 -171 l-35 -106 -77 -6 c-42 -4 -98 -9 -124 -13 -70 -10 -74 3 -80 270 l-5 220 -32 28 c-40 36 -90 37 -155 4 l-46 -24 6 34 c9 48 -2 84 -26 84 -10 0 -22 -4 -25 -10 -10 -16 -43 -11 -48 8 -3 12 -5 11 -6 -6z m93 -126 c15 6 53 -76 80 -170 25 -84 14 -79 -14 7 -24 78 -58 137 -77 137 -7 0 -19 -12 -28 -27 l-16 -28 6 30 c3 17 11 43 18 58 10 24 12 25 15 8 2 -11 9 -18 16 -15z m-102 12 c-5 -7 -13 -29 -17 -48 -11 -50 -56 -147 -62 -132 -8 20 36 151 57 172 22 22 38 27 22 8z m-337 -618 c-3 -5 -15 -10 -26 -10 -11 0 -17 5 -14 10 3 6 15 10 26 10 11 0 17 -4 14 -10z m76 -60 c51 -9 80 -19 87 -30 9 -15 6 -19 -19 -24 -18 -3 -28 -10 -24 -17 5 -7 -4 -9 -27 -5 -18 3 -57 8 -86 11 -50 6 -142 41 -142 55 0 4 10 12 23 18 25 13 79 11 188 -8z m793 -82 c-13 -39 -24 -79 -24 -89 0 -35 -19 -29 -25 8 -3 21 -12 64 -19 96 l-13 57 53 0 53 0 -25 -72z m-949 -11 c5 -8 38 -17 73 -20 54 -6 152 -38 152 -50 0 -6 -91 10 -130 22 -49 15 -60 14 -60 -8 0 -21 -26 -31 -82 -31 -41 0 -45 5 -23 34 21 27 19 32 -15 46 -47 20 -43 25 18 23 34 -2 61 -8 67 -16z"/>
                <path d="M2575 1355 c-27 -7 -72 -26 -98 -41 -41 -23 -48 -30 -43 -50 5 -17 3 -22 -7 -19 -8 4 -26 -24 -51 -81 -41 -90 -110 -204 -124 -204 -4 0 -20 24 -35 53 -69 132 -110 180 -176 208 -57 25 -98 13 -142 -42 -50 -63 -78 -196 -48 -226 12 -12 3 -37 -10 -29 -18 11 -35 -55 -47 -179 -11 -107 -14 -449 -5 -440 6 6 15 28 20 50 7 32 9 35 10 13 1 -15 5 -29 10 -32 18 -12 39 43 49 130 6 49 18 139 26 199 17 130 36 283 43 343 5 46 16 53 33 22 8 -15 8 -36 0 -76 -13 -62 -6 -84 11 -36 6 18 14 32 18 32 4 0 22 -36 41 -80 43 -105 81 -157 133 -181 94 -42 166 -9 249 115 32 47 26 57 72 -134 38 -162 83 -293 117 -342 47 -69 134 -148 164 -148 16 0 1 27 -24 41 -16 10 -45 41 -65 70 -39 58 -49 88 -15 45 27 -35 34 -28 15 15 -8 19 -29 94 -46 168 -26 110 -31 144 -25 190 4 31 7 91 6 134 -1 48 2 76 8 73 6 -4 8 16 6 51 -7 99 4 35 25 -145 11 -95 25 -193 31 -217 12 -48 28 -68 30 -38 1 21 29 -74 29 -99 0 -10 -4 -18 -8 -18 -12 0 -32 46 -32 72 0 18 -3 19 -12 10 -10 -10 -8 -26 9 -75 16 -44 21 -74 16 -104 -4 -33 -1 -49 17 -75 l22 -33 -5 40 c-3 22 -8 48 -13 59 -6 15 -4 17 15 11 21 -6 22 -5 18 37 -2 23 -2 34 0 23 4 -14 12 -1 30 45 13 36 21 75 18 87 -3 13 0 31 7 42 9 15 9 37 -1 101 -7 49 -9 86 -3 93 10 13 -22 298 -38 332 -6 14 -7 3 -4 -35 3 -42 -1 -32 -15 41 -28 138 -38 172 -64 210 -27 40 -63 46 -142 24z m-476 -238 c20 -54 23 -70 11 -62 -11 7 -19 25 -35 74 -9 30 13 19 24 -12z m-29 -16 c5 -11 10 -43 10 -73 0 -52 0 -52 -16 -28 -10 14 -22 30 -29 35 -6 6 -15 22 -19 38 -5 20 -3 27 9 27 8 0 15 5 15 10 0 17 19 11 30 -9z m-140 -86 c0 -14 -2 -25 -4 -25 -2 0 -6 11 -8 25 -3 14 -1 25 3 25 5 0 9 -11 9 -25z m218 -94 c14 -39 15 -71 5 -71 -23 1 -33 22 -37 80 -4 54 -3 60 8 44 7 -10 18 -34 24 -53z"/>
                <path d="M1937 737 c-9 -23 -20 -112 -13 -106 7 7 28 111 22 116 -2 2 -6 -3 -9 -10z"/>
                </g>
                
                </svg>
            </span>
            `;

        this.menu.innerHTML = infoStr;
        this.menu.setAttribute("id", "validationListMenuBar");
        this.menuContent = document.createElement("span");
        this.menuContent.setAttribute("class", "extendedBtn extended");
        this.menuContent.innerHTML = "&#171;";
        this.menu.appendChild(this.menuContent);
        this.listContainer = document.createElement("div");
        this.listContainer.setAttribute("class", "validatorListContainer validatorListContainer--expanded");
        this.parentSquare.appendChild(this.menu);
        this.parentSquare.appendChild(this.listContainer);
        document.body.appendChild(this.parentSquare);
        this.checkIfExpanded();
    }

    checkIfExpanded(){
        const expanded = JSON.parse(window.localStorage.getItem("rawHTMLExpanded")).expanded;
        if(!expanded) this.toggleExpansion();
    }

    numberOfErrors(arr){
        let obj = {
            warnings: 0,
            errors: 0
        }
        arr.map(el => el === "warning" ? obj.warnings++ : obj.errors++);
        return obj;
    }

    createListItems(){
        const lineb = /\r?\n|\r/g;
        for(let i = 0; i<this.jsonData.messages.length; i++){
            let item = this.jsonData.messages[i];
            let index = item.lastLine-1;
            let str = this.htmlArr[index].split("↵")[0];//.trim();
            let position = item.firstColumn;
            let extractArr = item.extract.split(lineb);
            
            //extractArr.length === 1 ? this.inspectElem(str, extractArr[0], item) : this.inspectElem(str, extractArr[1], item);

            let domNode = this.getElem(position, index);
            let listItem = new ListItem(item, domNode, i);
            this.listItems.push(listItem);
            this.listContainer.appendChild(listItem.box);
        }
    }

    /**
     * Retrieves the specific DOM-element
     * @param {int} pos 
     * @param {int} index 
     */
    getElem(pos, index){
        
        const originalString = this.htmlArr[index];

        // Hela strängen från given startposition
        const sub = originalString.substring(pos, originalString.length);
        
        //Elementets tagg
        const el = sub.substring(0, sub.indexOf(">"));

        //Vid exempelvis bilder, där ">" inte följer direkt efter elementet - splitta vid " " och använd index 0.
        const final = el.split(" ")[0];
        
        // Hela strängen fram till index (pos)
        const beforeString = originalString.substring(0, pos);

        let occurances = this.findOccurances(final.toLowerCase(), beforeString, index);

        for(let i = index-1; i>=0; i--){
            let s = this.htmlArr[i];
            occurances += this.findOccurances(final.toLowerCase(), s, i);
        }

        return document.getElementsByTagName(final)[occurances];
    }


    /**
     * Will loop trough entire given string to find occurances of the same element
     * @param {string} el 
     * @param {string} string 
     * @param {int} index 
     */
    findOccurances(el, string, index){
        const elem = `<${el}>`;
        let result = 0;
        for (let i = 0; i < string.length; i++) {
            let sub = string.substring(i, i + elem.length).toLowerCase()
            if (sub == elem && !this.betweenComments(i, index)) {
                result++;
            }
        }
        return result;
    }

    /**
     * Check if element is between comments
     * stringPos = start position in string
     * arrayIndex = array index... duh
     * @param {int} stringPos 
     * @param {int} arrayIndex 
     */
    betweenComments(stringPos, arrayIndex){
        
        let betweenComments = false;
        this.comments.map(comment => {
            if( arrayIndex >= comment.startLineIndex && 
                arrayIndex <= comment.endLineIndex &&
                stringPos >= comment.startPos &&
                stringPos <= comment.endPos)
                {
                    betweenComments = true;
                }
        });
        return betweenComments;
    }

    addListeners(){
        this.parentSquare.addEventListener("scroll", (e)=> this.listItems.map(el => el.remove()));
        
        this.menu.addEventListener("click", (e) => {
            this.toggleExpansion();
        })
    }

    toggleExpansion(){
        this.changeClassNames();
        this.listItems.map(item => item.remove());
        const expanded = this.listContainer.classList.contains("validatorListContainer--expanded");
        const { x, y } = this.parentSquare.getBoundingClientRect();
        window.localStorage.setItem("rawHTMLExpanded", JSON.stringify({expanded: expanded}));

        if(expanded){
            this.deltaY = y;
            this.callback(x, y);
        }else{
            this.callback(x, this.deltaY);
        }
    }

    changeClassNames(){
        this.parentSquare.classList.toggle("validator--disable-scroll");
        this.listContainer.classList.toggle("validatorListContainer--expanded");
        this.menuContent.classList.toggle("extended");
        document.getElementsByClassName("validator__warning-icon")[0].classList.toggle("validator__inline-block");
        document.getElementsByClassName("validator__error-icon")[0].classList.toggle("validator__inline-block");
        document.getElementsByClassName("validator__warningText")[0].classList.toggle("validator__warning--hide");
        document.getElementsByClassName("validator__warningText")[1].classList.toggle("validator__warning--hide");
        document.getElementsByClassName("validator__smallIcon")[0].classList.toggle("validator__inline-block");
    }

}